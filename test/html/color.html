<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>color</title>
    <link rel="stylesheet" href="../../dist/debug.css">
<style>
    table {
        margin      : 0 auto;
        font-family : monospace;
    }
</style>
</head>
<body>
    <table class="pui-tb-bordered">
        <tr class="pui-js-header">
            <th>name</th>
            <th>color</th>
            <th>greyColor</th>
            <th>css</th>
            <th>hsla</th>
        </tr>
    </table>
<script src="../../dist/browser-debug.js"></script>
<script>
    require([
        'pastry',
        'class/Color',
        'dom/query',
        'dom/data',
        'dom/class',
        'dom/style',
        'dom/construct',
        'fmt/sprintf'
    ], function (
        pastry,
        Color,
        domQuery,
        domData,
        domClass,
        domStyle,
        domConstruct,
        sprintf
    ) {
        function createColorTr (name, color) {
            var color     = new Color(color),
                greyColor = color.toGrey(),
                fontColor = greyColor.r >= 128 ? 'black' : 'white',
                tmpl =
                    '<tr>' +
                        '<td>%s</td>' +
                        '<td style="color: %s; background-color: %s;">%s</td>' +
                        '<td style="color: %s; background-color: %s;">%s</td>' +
                        '<td>%s</td>' +
                        '<td>%s</td>' +
                    '</tr>',
                colorHTML = sprintf(tmpl,
                    name,
                    fontColor, color.toString(), color.toHex(),
                    fontColor, greyColor.toString(), greyColor.toHex(),
                    color.toCss(true),
                    color.toHsla()
                ),
                $tr = domConstruct.toDom(colorHTML);

            // testing {
                domData.set($tr, 'color', color.toString());
                domStyle.set($tr, {
                    height : '30px',
                    width  : '100%',
                });
                domClass.add($tr, 'hello hoo weee haaa');
                domClass.remove($tr, 'hello');
                domClass.toggle($tr, 'hello weee');
            // }
            // destroy color instance {
                color.destroy();
                greyColor.destroy();
            // }
            return $tr;
        };

        var $table = domQuery.one('table');

        pastry.each(Color.named, function (rgb, name) {
            domConstruct.place(createColorTr(name, rgb), $table);
        });
    });
</script>
</body>
</html>
