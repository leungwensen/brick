<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>color</title>
    <link rel="stylesheet" href="./color/style.css">
</head>
<body>
    <table id="colorTable">
        <tr>
            <th>name</th>
            <th>color</th>
            <th>greyColor</th>
            <th>css</th>
            <th>hsla</th>
        </tr>
    </table>
    <script src="../../dist/browser-debug.js"></script>
    <script>
        require([
            'pastry',
            'dom/query',
            'Color'
        ], function (
            pastry,
            query,
            Color
        ) {
            var doc = document,
                $table = query.one('#colorTable');

            function createColorTr (name, color) {
                var $tr       = doc.createElement('tr'),
                    color     = new Color(color),
                    greyColor = color.toGrey(),
                    $tds      = {},
                    fontColor = greyColor.r > 125 ? 'black' : 'white';

                pastry.each([
                    'name',
                    'color',
                    'greyColor',
                    'css',
                    'hsla'
                ], function (str) {
                    $tds[str] = doc.createElement('td');
                });

                $tds.name.innerHTML      = name;
                $tds.color.innerHTML     = color.toHex();
                $tds.hsla.innerHTML      = color.toHsla();
                $tds.css.innerHTML       = color.toCss(true);
                $tds.greyColor.innerHTML = greyColor.toHex();

                $tds.color.style['background-color']     = color;
                $tds.greyColor.style['background-color'] = greyColor;
                $tds.color.style['color']     = fontColor;
                $tds.greyColor.style['color'] = fontColor;

                pastry.each([
                    'name',
                    'color',
                    'greyColor',
                    'css',
                    'hsla'
                ], function (str) {
                    $tr.appendChild($tds[str]);
                });
                color.destroy();
                greyColor.destroy();
                return $tr;
            };

            pastry.each(Color.named, function (rgb, name) {
                $table.appendChild(createColorTr(name, rgb));
            });
        });
    </script>
</body>
</html>
