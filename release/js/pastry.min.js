/* pastry v0.1.0
*  https://github.com/leungwensen/pastry
*  Copyright (c) 2013 cookers;  Licensed MIT */
"use strict";var PASTRY,PT;PASTRY=PT={},PT.OVEN=PT.ON=this,function(a){var b=a.A=Array,c=a.B=Boolean,d=a.D=Date,e=a.F=Function,f=a.N=Number,g=a.O=Object,h=a.S=String,i=a.PS="prototype",j=a.US="undefined",k=a.AP=b[i],l=(a.BP=c[i],a.DP=d[i],a.FP=e[i]),m=(a.NP=f[i],a.OP=g[i]),n=a.SP=h[i],o=a.toStr=function(a){return m.toString.call(a)};a.isBool=function(a){return"boolean"==typeof a},a.isFunc=function(a){return"function"==typeof a},a.isNum=function(a){return"number"==typeof a},a.isStr=function(a){return"string"==typeof a},a.isDef=function(a){return null!==a&&void 0!==a},a.isObj=function(a){return null!==a&&"object"==typeof a},a.isDate=function(a){return"[object Date]"===o(a)},a.isErr=function(a){return"[object Error]"===o(a)},a.isRegExp=function(a){return"[object RegExp]"===o(a)},a.isArr=b.isArray||function(a){return"[object Array]"===o(a)},a.tryAny=function(a){var b,c;for(b=0;b<a.length;b++)try{c=a[b]();break}catch(d){}return c},typeof exports!==j?(typeof module!==j&&module.exports&&(exports=module.exports=a),exports.PASTRY=exports.PT=a,a.NODEJS=!0,a.ON.process=process):(a.ON.PASTRY=a.ON.PT=a,a.BROWSER=!0),a.indexOf=function(a,b,c){if(c=c||0,k.indexOf)return a.indexOf(b,c);var d,e=a.length>>>0;if(0===e||c>=e)return-1;for(d=c>=0?c:Math.max(e-Math.abs(c),0);e>d;d++)if(a[d]==b)return d;return-1},a.lastIndexOf=function(a,b,c){if(k.lastIndexOf)return a.lastIndexOf(b,c);var d,e=a.length>>>0;if(0===e)return-1;for(c=c||e,d=c>=0?Math.min(c,e-1):e-Math.abs(c);d>=0;d--)if(a[d]==b)return d;return-1},a.every=function(a,b,c){if(k.every)return a.every(b,c);var d;for(d=0;d<a.length;d++)if(!b.call(c,a[d],d,a))return!1;return!0},a.filter=function(b,c,d){if(k.filter)return b.filter(c,d);var e=[];return a.each(b,function(a,f){c.call(d,a,f,b)&&e.push(a)}),e},a.map=function(b,c,d){if(k.map)return b.map(c,d);var e=[];return a.each(b,function(a,f){e.push(c.call(d,a,f,b))}),e},a.some=function(a,b,c){if(k.some)return a.some(b,c);var d;for(d=0;d<a.length;d++)if(b.call(c,a[d],d,a))return!0;return!1},a.reduce=function(a,b,c){if(k.reduce)return c?a.reduce(b,c):a.reduce(b);var d,e;for(c&&(e=c),d=0;d<a.length;d++)e=e?b(e,a[d],d,a):a[d];return e},a.reduceRight=function(a,b,c){if(k.reduceRight)return c?a.reduceRight(b,c):a.reduceRight(b);var d,e;for(c&&(e=c),d=a.length-1;d>=0;d--)e=e?b(e,a[d],d,a):a[d];return e},a.has=a.hasKey=function(a,b){return a.hasOwnProperty(b)},a.each=a.forEach=function(b,c,d){if(m.forEach)b.forEach(c,d);else{var e;for(e in b)a.has(b,e)&&c.call(d,b[e],e,b)}},a.binarySearch=function(a,b,c){for(var d=0,e=a.length,f=Math.floor(e/2);e!==f;)c(b,a[f])>0?d=f+1:e=f,f=Math.floor((d+e)/2);return f=0===f&&0!==c(b,a[f])?-1:f},a.remove=function(b,c,d){var e,f=b.length;return c&&a.isNum(c)?(e=b.slice((d||c)+1||f),b.length=0>c?f+c:c,b.push.apply(b,e)):b},a.replace=function(b,c,d,e){var f=!1;return a.each(b,function(a,g){return a===c&&(b[g]=d,f=!0,e)?f:void 0}),f},a.intersection=function(b,c){var d=[];return a.each(b,function(b){a.hasVal(c,b)&&!a.hasVal(d,b)&&d.push(b)}),d},a.complement=function(b,c){var d=[];return a.each(b,function(b){a.hasVal(c,b)||a.hasVal(d,b)||d.push(b)}),d},a.uniq=function(b){var c=[];return a.each(b,function(b){a.hasVal(c,b)||c.push(b)}),c},a.union=function(b,c){return a.uniq(b.concat(c))},a.keys=function(b){if(g.keys)return g.keys(b);var c=[];return a.isFunc(b)?a.each(b,function(a,b){b!==i&&c.push(b)}):a.each(b,function(a,b){c.push(b)}),c},a.values=function(b){var c=[];return a.each(b,function(a){c.push(a)}),c},a.hasVal=a.hasValue=function(b,c){return a.indexOf(a.values(b),c)>-1},a.merge=function(b,c){if(!c||!a.isObj(c))return b;var d={};return a.each(b,function(a,b){d[b]=a}),a.each(c,function(a,b){d[b]=a}),d},a.bind=function(b,c){if(a.isFunc(c)&&a.isFunc(b)){var d=arguments.slice(2),e=function(){},f=function(){return b.apply(this instanceof e&&c?this:c||a.ON,d.concat(arguments))};return l.bind?b.bind(c,d):(e[i]=b[i],f[i]=new e,f)}},a.toInt=function(a,b){return parseInt(a,b||10)},a.trim=function(a){return n.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},a.trimLeft=function(a){return n.trimLeft?a.trimLeft():a.replace(/^\s+/g,"")},a.trimRight=function(a){return n.trimRight?a.trimRight():a.replace(/\s+$/g,"")},a.uc=function(a){return a.toUpperCase()},a.lc=function(a){return a.toLowerCase()},a.hasSub=function(a,b){return a.indexOf(b)>-1}}(PT),function(a){a.FMT={date:function(b,c){var d,e,f,g,h,i,j,k=function(a){return 10>a?"0"+a:a},l=function(a){var b=a.toString(),c=b.length;return 3===c?b:2===c?"0"+b:"00"+b};return c=c||"{YYYY}-{MM}-{DD} {hh}:{mm}:{ss}",c.replace("{YYYY}",d=a.S(b.getFullYear())).replace("{MM}",k(e=b.getMonth()+1)).replace("{DD}",k(f=b.getDate())).replace("{hh}",k(g=b.getHours())).replace("{mm}",k(h=b.getMinutes())).replace("{ss}",k(i=b.getSeconds())).replace("{lms}",l(j=b.getMilliseconds())).replace("{YY}",d.substring(2)).replace("{M}",e).replace("{D}",f).replace("{h}",g).replace("{m}",h).replace("{s}",i).replace("{ms}",j)},num:function(a,b){var c,d,e,f=a.toString(),g=f.split(".");if(b=b||{comma:1,decimal:2,integer:5,zero:0},e=b.zero&&b.zero>0?"0":" ",b.decimal&&b.decimal>0)for(g[1]=g[1]||"",g[1]=g[1].slice(0,b.decimal),d=b.decimal-g[1].length,c=0;d>c;c++)g[1]+="0";if(b.integer&&b.integer>0)for(d=b.integer-g[0].length,c=0;d>c;c++)g[0]=e+g[0];return b.comma&&0!==b.comma&&(g[0]=g[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")),""!==g[1]?g.join("."):g[0]}}}(PT),function(PT){if(PT.JSON=PT.tryAny([function(){return JSON},function(){return PT.OVEN.JSON}]),!PT.JSON){var D2JSON=PT.DP.toJSON,S=PT.S;PT.isFunc(D2JSON)||(PT.each([PT.SP,PT.NP,PT.BP],function(a){a.toJSON=function(){return this.valueOf()}}),D2JSON=function(){return isFinite(this.valueOf())?PT.format.date(this,"{YYY}-{MM}-{DD}T{hh}:{mm}:{ss}Z"):null});var gap,indent,rep,J=PT.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},quote=function(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return PT.isStr(b)?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},str=function(a,b){var c,d,e,f,g=gap,h=b[a];switch(h&&PT.isObj(h)&&PT.isFunc(h.toJSON)&&(h=h.toJSON(a)),PT.isFunc(rep)&&(h=rep.call(b,a,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?S(h):"null";case"boolean":case"null":return S(h);case"object":if(!h)return"null";if(gap+=indent,f=[],"[object Array]"===PT.OP.toString.apply(h)){for(c=0;c<h.length;c+=1)f[c]=str(c,h)||"null";return e=0===f.length?"[]":gap?"[\n"+gap+f.join(",\n"+gap)+"\n"+g+"]":"["+f.join(",")+"]",gap=g,e}return rep&&PT.isObj(rep)?PT.each(rep,function(a){PT.isStr(a)&&(d=a,e=str(d,h),e&&f.push(quote(d)+(gap?": ":":")+e))}):PT.each(h,function(a,b){e=str(b,h),e&&f.push(quote(b)+(gap?": ":":")+e)}),e=0===f.length?"{}":gap?"{\n"+gap+f.join(",\n"+gap)+"\n"+g+"}":"{"+f.join(",")+"}",gap=g,e}};J.stringify=function(a,b,c){var d;if(gap="",indent="",rep=b,PT.isNum(c))for(d=0;c>d;d+=1)indent+=" ";else PT.isStr(c)&&(indent=c);if(rep=b,!(!b||PT.isFunc(b)||PT.isObj(b)&&PT.isNum(b.length)))throw new Error("JSON.stringify");return str("",{"":a})},J.parse=function(text,reviver){function walk(a,b){var c,d=a[b];return d&&PT.isObj(d)&&PT.each(d,function(a,b){c=walk(d,b),PT.isDef(c)?d[b]=c:delete d[b]}),reviver.call(a,b,d)}var j;if(text=S(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),PT.isFunc(reviver)?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}}(PT),function(a){function b(b,c,d){b[c]=a.toInt(d)}function c(a,c,e){d=c.match(e),d&&b(a,d[0].match(/\w*/)[0],d[1]||0)}var d,e=a.ON,f=e.navigator||{},g=f.userAgent;a.initUA=function(){a.NODEJS?a.VER=a.versions=e.process.versions:(a.HOST=e.location.host,a.DOC=e.document,a.UA=a.userAgent=g,a.PL=a.platform=a.detectPL(f.platform)||a.detectPL(g)||"unknown",a.PLUG=a.plugins=a.detectPLUG(f.plugins),a.VER=a.versions=a.detectVER(g))},a.detectPL=function(b){if(a.isDef(b)){var c=a.lc(b).match(/mac|win|linux|ipad|ipod|iphone|android/);return a.isArr(c)?c[0]:c}},a.detectPLUG=function(b){return{flash:function(){var c,d=0,e=13;if(b&&b.length)c=b["Shockwave Flash"],c&&c.description&&(d=c.description.match(/\b(\d+)\.\d+\b/)[1]||d);else for(;e--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),d=e;break}catch(f){}return a.toInt(d)}()}},a.detectVER=function(e){if(a.isDef(e)){e=a.lc(e);var f,g={};return a.each([/msie ([\d.]+)/,/firefox\/([\d.]+)/,/chrome\/([\d.]+)/,/crios\/([\d.]+)/,/opera.([\d.]+)/,/adobeair\/([\d.]+)/],function(a){c(g,e,a)}),g.crios&&(g.chrome=g.crios),d=e.match(/version\/([\d.]+).*safari/),d&&b(g,"safari",d[1]||0),d=e.match(/version\/([\d.]+).*mobile.*safari/),d&&b(g,"mobilesafari",d[1]||0),a.each([/trident\/([\d.]+)/,/gecko\/([\d.]+)/,/applewebkit\/([\d.]+)/,/presto\/([\d.]+)/],function(a){c(g,e,a)}),f=g.msie,6===f?g.trident=4:(7===f||8===f)&&(g.trident=5),g}},a.initUA()}(PT),function(a){a.NODEJS||(a.getXHR=function(){return a.tryAny([function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}])},a.ajax=function(b,c){c=c||{};var d=a.getXHR(),e=c.method?a.uc(c.method):"GET",f=c.type?a.lc(c.type):"xml",g=c.data?a.QueryStr.stringify(c.data):null,h=c.contentType,i=c.isAsync;a.each(["abort","error","load","loadend","loadstart","progress","success","timeout"],function(a){c[a]&&(d["on"+a]=c[a])}),d.isSuccess=function(){return d.status>=200&&d.status<300||304===d.status||!d.status&&"file:"===a.ON.location.protocol||!d.status&&a.VER.safari},d.onreadystatechange=function(){if(4===d.readyState)if(d.isSuccess()&&c.success){var b=d.responseText;"json"===f&&(b=a.tryAny([function(){return a.JSON.parse(b)}])||b),d.onsuccess(b)}else c.error&&d.onerror(d.statusText)},"GET"===e?(g&&(b+=(a.hasSub(b,"?")?"&":"?")+g),d.open(e,b,i),d.setRequestHeader("Content-Type",h||"text/plain;charset=UTF-8")):"POST"===e?(d.open(e,b,i),d.setRequestHeader("Content-Type",h||"application/x-www-form-urlencoded;charset=UTF-8")):d.open(e,b,i),d.send(g)},a.each(["get","post"],function(b){a[b]=function(c,d){d.method=b,a.ajax(c,d)}}))}(PT),function(a){if(!a.NODEJS){var b=function(a){return decodeURIComponent(a.replace(/\+/g," "))},c=encodeURIComponent;a.QueryStr={escape:c,unescape:b,parse:function(c,d,e){d=d||"&",e=e||"=";var f,g={},h=c.split(d);return a.each(h,function(a){f=a.split(e),f.length>0&&(g[b(f.shift())]=b(f.join(e)))}),g},stringify:function(b,d){var e=[],f=d&&d.arrayKey?!0:!1;return a.each(b,function(b,d){a.isArr(b)?a.each(b,function(a){e.push(c(f?d+"[]":d)+"="+c(a))}):e.push(c(d)+"="+c(b))}),e.join("&")}}}}(PT),function(a){if(!a.NODEJS){var b=function(b){var c={},d=[],e=/^(?:checkbox|radio)$/i,f=/^(?:submit|button|image|reset|file)$/i,g=/^(?:input|select|textarea|keygen)/i;return a.each(b.elements,function(a){d.push(a)}),a.map(a.filter(d,function(a){return a.name&&!a.disabled&&g.test(a.nodeName)&&!f.test(a.type)&&(!e.test(a.type)||a.checked)}),function(b){var d=b.value;d&&(a.isArr(d)?a.map(d,function(a){c[a.name]=a.value}):c[b.name]=b.value)}),c};a.Form={data:b,serialize:function(c){return a.QueryStr.stringify(b(c))}}}}(PT),function(a){if(!a.NODEJS){var b=a.DOC,c=a.O,d=a.ON,e=a.has,f="Element",g=function(a){return e(d,f)&&e(b.createElement("_"),a)&&e(b.createElementNS("http://www.w3.org/2000/svg","svg"),a)},h=function(b,e,h,i){if(!g(b)){var j={},k=d[f][a.PS];c.defineProperty?(e&&(j.get=e),h&&(j.set=h),i&&(j=a.merge(j,i)),c.defineProperty(k,b,j)):a.OP.__defineGetter__&&(k.__defineGetter__(b,e),k.__defineSetter__(b,h))}};a.DOM={elemHas:g,elemSet:h}}}(PT),function(a){if(!a.NODEJS){var b="class",c="classList",d=function(a){return""===a||/\s/.test(a)?!1:!0},e=function(c){var d=this;d.list=[],a.each(a.trim(c.getAttribute(b)).split(/\s+/),function(a){d.list.push(a)}),d._updateClassName=function(){c.setAttribute(b,d.toString())}},f=function(){return new e(this)};e[a.PS]={contains:function(b){return b=a.S(b),d(b)&&a.hasVal(this.list,b)},item:function(a){return this.list[a]||null},add:function(){var b=this,c=!1;a.each(arguments,function(e){e=a.S(e),d(e)&&!a.hasVal(b.list,e)&&(b.list.push(e),c=!0)}),c&&b._updateClassName()},remove:function(){var b=this,c=!1;a.each(arguments,function(e){e=a.S(e),d(e)&&a.hasVal(b.list,e)&&(b.list.splice(a.indexOf(b.list,e),1),c=!0)}),c&&b._updateClassName()},toggle:function(b,c){if(b=a.S(b),d(b)){var e=this,f=e.contains(b)?c!==!0&&"remove":c!==!1&&"add";f&&e[f](b)}},toString:function(){return this.list.join(" ")}},a.DOM.elemSet(c,f)}}(PT),function(a){a.NODEJS||a.DOM.elemSet("dataset",function(){var b,c,d,e=this,f={},g=e.attributes,h=function(b){return a.uc(b.charAt(1))},i=function(){return this},j=function(a,b){return b?this.setAttribute(a,b):this.removeAttribute(a)};return a.each(g,function(g){if(g&&g.name&&/^data-\w[\w\-]*$/.test(g.name)){b=g.value,c=g.name,d=c.substr(5).replace(/-./g,h);try{a.O.defineProperty(f,d,{get:a.bind(i,b||""),set:a.bind(j,e,c)})}catch(k){f[d]=b}}}),f})}(PT),function(a){if(!a.NODEJS){var b="block",c="none",d={show:function(){this.style.display=b},hide:function(){this.style.display=c},toggle:function(){var a=this,d=a.style.display;a.style.display=d===b?c:b}};a.each(a.keys(d),function(b){a.DOM.elemSet(b,function(){return d[b]})})}}(PT),function(a){a.NODEJS||(a.UI=a.UI||{},a.UI.Tabs=function(b,c){c=c||{};var d="current",e="ids",f=c.activeClass||"PT-activeTab",g=function(b){a.each(b.dataset[e].split(/\s/),function(b){a.DOC.getElementById(b).show()})},h=function(b){a.each(b.dataset[e].split(/\s/),function(b){a.DOC.getElementById(b).hide()})};a.each(b.children,function(c){if(a.isObj(c)){var e=b.dataset[d];c.id===e?(c.classList.add(f),g(c)):h(c),c.addEventListener("click",function(){var c=a.DOC.getElementById(b.dataset[d]),e=this;c.classList.toggle(f),e.classList.toggle(f),h(c),g(e),b.dataset[d]=e.id})}})})}(PT);