/* brick v0.0.0
*  https://github.com/leungwensen/brick
*  Copyright (c) 2013 BR builders;  Licensed MIT */
"use strict";var BRICK,BR;BRICK=BR={},function(){BR.GROUND=BR.GROUND||this}(),function(a){a.validator=a.validator||{},a.validator.isArray=Array.isArray,a.validator.isFunction=function(a){return"function"==typeof a}}(BR),function(a){a.array=a.array||Array;var b=function(a){return isNaN(a)?a=0:0!==a&&1/0!==a&&a!==-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a};a.array.prototype.indexOf=a.array.prototype.indexOf||function(a,c){var d,e=this.length>>>0;if(0===e)return-1;if(c=c?b(c):0,c>=e)return-1;for(d=c>=0?c:Math.max(e-Math.abs(c),0);e>d;d++)if(this.hasOwnProperty(d)&&this[d]===a)return d;return-1},a.array.prototype.lastIndexOf=a.array.prototype.lastIndexOf||function(a,c){var d,e=this.length>>>0;if(0===e)return-1;for(c=c?b(c):e,d=c>=0?Math.min(c,e-1):e-Math.abs(c);d>=0;d--)if(this.hasOwnProperty(d)&&this[d]===a)return d;return-1},a.array.prototype.every=a.array.prototype.every||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e=this.length>>>0;for(d=0;e>d;d++)if(this.hasOwnProperty(d)&&!b.call(c,this[d],d,this))return!1;return!0},a.array.prototype.filter=a.array.prototype.filter||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e=[];this.length>>>0;for(d in this)this.hasOwnProperty(d)&&b.call(c,this[d],d,this)&&e.push(this[d]);return e},a.array.prototype.forEach=a.array.prototype.forEach||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e=this.length>>>0;for(d=0;e>d;d++)this.hasOwnProperty(d)&&b.call(c,this[d],d,this)},a.array.prototype.map=a.array.prototype.map||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e=[],f=this.length>>>0;for(d=0;f>d;d++)this.hasOwnProperty(d)&&e.push(b.call(c,this[d],d,this));return e},a.array.prototype.some=a.array.prototype.some||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e=this.length>>>0;for(d=0;e>d;d++)if(this.hasOwnProperty(d)&&b.call(c,this[d],d,this))return!0;return!1},a.array.prototype.reduce=a.array.prototype.reduce||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e,f=this.length>>>0,g=!1;for(null!==c&&(e=c,g=!0),d=0;f>d;d++)this.hasOwnProperty(d)&&(g?e=b(e,this[d],d,this):(e=this[d],g=!0));if(!g)throw new TypeError;return e},a.array.prototype.reduceRight=a.array.prototype.reduceRight||function(b,c){if(!a.validator.isFunction(b))throw new TypeError;var d,e,f=this.length>>>0,g=!1;for(null!==c&&(e=c,g=!0),d=f-1;d>-1;d--)this.hasOwnProperty(d)||(g?e=b(e,this[d],d,this):(e=this[d],g=!0));if(!g)throw new TypeError;return e},a.array.prototype.binarySearch=a.array.prototype.binarySearch||function(b,c){if(!a.validator.isFunction(c))throw new TypeError;for(var d=0,e=this.length,f=Math.floor(this.length/2);e!==f;)c(b,this[f])>0?d=f+1:e=f,f=Math.floor((d+e)/2);return f=0===f&&0!==c(b,this[f])?-1:f},a.array.prototype.remove=a.array.prototype.remove||function(a,c){if(!a)return this;a=b(a),c&&(c=b(c));var d=this.slice((c||a)+1||this.length);this.length=0>a?this.length+a:a,this.push.apply(this,d)},a.array.prototype.replace=a.array.prototype.replace||function(a,b){var c,d=this.length>>>0;for(c=0;d>c;c++)this[c]===a&&(this[c]=b)},a.array.prototype.hasElement=a.array.prototype.hasElement||function(a){return this.indexOf(a)>-1},a.array.prototype.intersection=a.array.prototype.intersection||function(b){if(!a.validator.isArray(b))throw new TypeError;var c,d=this.length>>>0,e=[];for(c=0;d>c;c++)b.hasElement(this[c])&&!e.hasElement(this[c])&&e.push(this[c]);return e},a.array.prototype.complement=a.array.prototype.complement||function(b){if(!a.validator.isArray(b))throw new TypeError;var c,d=this.length>>>0,e=[];for(c=0;d>c;c++)b.hasElement(this[c])||e.hasElement(this[c])||e.push(this[c]);return e},a.array.prototype.union=a.array.prototype.union||function(b){if(!a.validator.isArray(b))throw new TypeError;return this.concat(b).uniq()},a.array.prototype.uniq=a.array.prototype.uniq||function(){var a=0,b=this.length>>>0,c=[];for(a=0;b>a;a++)c.hasElement(this[a])||c.push(this[a]);return c}}(BR),function(a){a.string=a.string||String,a.string.prototype.trim=a.string.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}}(BR),function(a){a.number=a.number||Number,a.number.prototype.toFormatString=a.number.prototype.toFormatString||function(a){var b,c,d,e=this.toString(),f=e.split(".");if(a=a||{comma:1,decimal:2,integer:5,zero:0},d=a.hasOwnProperty("zero")&&0!==a.zero?"0":" ",a.hasOwnProperty("decimal"))for(f[1]=f[1]||"",f[1]=f[1].slice(0,a.decimal),c=a.decimal-f[1].length,b=0;c>b;b++)f[1]+="0";if(a.hasOwnProperty("integer"))for(c=a.integer-f[0].length,b=0;c>b;b++)f[0]=d+f[0];return a.hasOwnProperty("comma")&&0!==a.comma&&(f[0]=f[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")),""!==f[1]?f.join("."):f[0]}}(BR),function(a){a.date=a.date||Date;var b=function(a){return(10>a?"0":"")+a};a.date.prototype.toFormatString=a.date.prototype.toFormatString||function(a){var c,d,e,f,g,h;return a=a||"{YYYY}-{MM}-{DD} {hh}:{mm}:{ss}",a.replace("{YYYY}",c=String(this.getFullYear())).replace("{MM}",b(d=this.getMonth())).replace("{DD}",b(e=this.getDate())).replace("{hh}",b(f=this.getHours())).replace("{mm}",b(g=this.getMinutes())).replace("{ss}",b(h=this.getSeconds())).replace("{YY}",c.substring(2)).replace("{M}",d).replace("{D}",e).replace("{h}",f).replace("{m}",g).replace("{s}",h)}}(BR);